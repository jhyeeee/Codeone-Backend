<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.codeone.dao.lecture.LectureDao">

<!-- 강의글 추가 -->
<insert id="writeLecture" parameterType="com.codeone.dto.lecture.LectureDto">

	insert into lecture(id, category, title, content, price, zoomurl, zoompwd, filename, newfilename, wdate, likecount, delflg )
	values(#{id}, #{category}, #{title}, #{content}, #{price}, #{zoomurl}, #{zoompwd}, #{filename}, #{newfilename}, now(), 0, 0 )

</insert>

<!-- 강의글 수정 -->
<update id="updateLecture" parameterType="com.codeone.dto.lecture.LectureDto">
	update lecture
	set title=#{title}, content=#{content}, category=#{category}, price=#{price}, zoomurl=#{zoomurl}, zoompwd=#{zoompwd},
		filename=#{filename}, newfilename=#{newfilename}, wdate=now()
	where seq=#{seq}
</update>

<!-- 강의글 삭제 -->
<update id="deleteLecture" parameterType="Integer">
	update lecture
	set delflg=1
	where seq=#{seq}
</update>

<!-- 강의목록 -->
<select id="getLectureList" resultType="com.codeone.dto.lecture.LectureDto">
	select *
	from lecture
	where delflg=0
	order by seq desc					<!-- seq순으로 정렬 -->
</select>

<!-- 강의 한개 정보 -->
<select id="getLectureOne" parameterType="Integer" resultType="com.codeone.dto.lecture.LectureDto">
	select *
	from lecture
	where seq=#{seq}	
</select>

</mapper>





